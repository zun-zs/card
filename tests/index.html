<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>å¾·å·æ‰‘å…‹æ¸¸æˆé€»è¾‘æµ‹è¯•</title>
    <style>
        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            max-width: 1200px;
            margin: 0 auto;
            padding: 20px;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            min-height: 100vh;
        }
        
        .container {
            background: rgba(255, 255, 255, 0.1);
            border-radius: 15px;
            padding: 30px;
            backdrop-filter: blur(10px);
            box-shadow: 0 8px 32px rgba(0, 0, 0, 0.3);
        }
        
        h1 {
            text-align: center;
            margin-bottom: 30px;
            font-size: 2.5em;
            text-shadow: 2px 2px 4px rgba(0, 0, 0, 0.3);
        }
        
        .test-controls {
            text-align: center;
            margin-bottom: 30px;
        }
        
        .run-tests-btn {
            background: linear-gradient(45deg, #4CAF50, #45a049);
            color: white;
            border: none;
            padding: 15px 30px;
            font-size: 18px;
            border-radius: 25px;
            cursor: pointer;
            transition: all 0.3s ease;
            box-shadow: 0 4px 15px rgba(0, 0, 0, 0.2);
        }
        
        .run-tests-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 6px 20px rgba(0, 0, 0, 0.3);
        }
        
        .run-tests-btn:disabled {
            background: #666;
            cursor: not-allowed;
            transform: none;
        }
        
        .test-output {
            background: rgba(0, 0, 0, 0.3);
            border-radius: 10px;
            padding: 20px;
            font-family: 'Courier New', monospace;
            font-size: 14px;
            line-height: 1.6;
            white-space: pre-wrap;
            max-height: 600px;
            overflow-y: auto;
            border: 1px solid rgba(255, 255, 255, 0.2);
        }
        
        .test-summary {
            margin-top: 20px;
            padding: 15px;
            border-radius: 10px;
            text-align: center;
            font-weight: bold;
            font-size: 16px;
        }
        
        .test-summary.success {
            background: rgba(76, 175, 80, 0.3);
            border: 2px solid #4CAF50;
        }
        
        .test-summary.failure {
            background: rgba(244, 67, 54, 0.3);
            border: 2px solid #f44336;
        }
        
        .test-info {
            background: rgba(255, 255, 255, 0.1);
            border-radius: 10px;
            padding: 20px;
            margin-bottom: 20px;
            border-left: 4px solid #2196F3;
        }
        
        .test-info h3 {
            margin-top: 0;
            color: #2196F3;
        }
        
        .test-categories {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 15px;
            margin-bottom: 20px;
        }
        
        .category {
            background: rgba(255, 255, 255, 0.05);
            border-radius: 8px;
            padding: 15px;
            border-left: 3px solid #FF9800;
        }
        
        .category h4 {
            margin-top: 0;
            color: #FF9800;
        }
        
        .category ul {
            margin: 0;
            padding-left: 20px;
        }
        
        .note {
            background: rgba(255, 193, 7, 0.2);
            border: 1px solid #FFC107;
            border-radius: 8px;
            padding: 15px;
            margin-bottom: 20px;
        }
        
        .note h4 {
            margin-top: 0;
            color: #FFC107;
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>ğŸ® å¾·å·æ‰‘å…‹æ¸¸æˆé€»è¾‘æµ‹è¯•</h1>
        
        <div class="note">
            <h4>ğŸ“ ä½¿ç”¨è¯´æ˜</h4>
            <p>è¿™ä¸ªæµ‹è¯•é¡µé¢éœ€è¦åœ¨æ¸¸æˆè¿è¡Œæ—¶æ‰“å¼€ï¼Œä»¥ä¾¿è®¿é—®æ¸¸æˆçš„æ ¸å¿ƒæ¨¡å—ã€‚è¯·æŒ‰ä»¥ä¸‹æ­¥éª¤æ“ä½œï¼š</p>
            <ol>
                <li>ç¡®ä¿æ¸¸æˆæœåŠ¡å™¨æ­£åœ¨è¿è¡Œ (http://localhost:3000)</li>
                <li>åœ¨æ¸¸æˆé¡µé¢æ‰“å¼€æµè§ˆå™¨å¼€å‘è€…å·¥å…·</li>
                <li>åœ¨æ§åˆ¶å°ä¸­è¿è¡Œæµ‹è¯•ä»£ç </li>
            </ol>
        </div>
        
        <div class="test-info">
            <h3>ğŸ“‹ æµ‹è¯•è¦†ç›–èŒƒå›´</h3>
            
            <div class="test-categories">
                <div class="category">
                    <h4>ğŸ¯ åŸºç¡€åŠŸèƒ½æµ‹è¯•</h4>
                    <ul>
                        <li>æ¸¸æˆåˆå§‹åŒ–</li>
                        <li>ç›²æ³¨æ”¶å–æœºåˆ¶</li>
                        <li>ç­¹ç ç®¡ç†</li>
                        <li>åº•æ± åˆ†é…</li>
                    </ul>
                </div>
                
                <div class="category">
                    <h4>ğŸ² æ¸¸æˆé€»è¾‘æµ‹è¯•</h4>
                    <ul>
                        <li>çœ‹ç‰Œ/è·Ÿæ³¨/åŠ æ³¨é€»è¾‘</li>
                        <li>é˜¶æ®µæ¨è¿›æœºåˆ¶</li>
                        <li>è¡ŒåŠ¨æƒåˆ¤æ–­</li>
                        <li>æ¸¸æˆçŠ¶æ€ä¸€è‡´æ€§</li>
                    </ul>
                </div>
                
                <div class="category">
                    <h4>ğŸ¤– AIæµ‹è¯•</h4>
                    <ul>
                        <li>AIå†³ç­–ç®—æ³•</li>
                        <li>éš¾åº¦çº§åˆ«</li>
                        <li>å†³ç­–åˆç†æ€§</li>
                    </ul>
                </div>
                
                <div class="category">
                    <h4>ğŸ” è¾¹ç•Œæƒ…å†µæµ‹è¯•</h4>
                    <ul>
                        <li>ç­¹ç ä¸è¶³å¤„ç†</li>
                        <li>å…¨ä¸‹é€»è¾‘</li>
                        <li>å¼‚å¸¸æƒ…å†µå¤„ç†</li>
                    </ul>
                </div>
            </div>
        </div>
        
        <div class="test-controls">
            <button id="copyTestCode" class="run-tests-btn">ğŸ“‹ å¤åˆ¶æµ‹è¯•ä»£ç </button>
            <button id="openGamePage" class="run-tests-btn" style="margin-left: 10px;">ğŸ® æ‰“å¼€æ¸¸æˆé¡µé¢</button>
        </div>
        
        <div id="testOutput" class="test-output" style="display: none;"></div>
        <div id="testSummary" class="test-summary" style="display: none;"></div>
    </div>

    <script>
        // æµ‹è¯•ä»£ç å­—ç¬¦ä¸²
        const testCode = `
// å¾·å·æ‰‘å…‹æ¸¸æˆé€»è¾‘æµ‹è¯•å¥—ä»¶
// åœ¨æ¸¸æˆé¡µé¢çš„æ§åˆ¶å°ä¸­è¿è¡Œæ­¤ä»£ç 

// ç®€å•çš„æµ‹è¯•æ¡†æ¶
class TestRunner {
  constructor() {
    this.tests = []
    this.passed = 0
    this.failed = 0
  }

  test(name, fn) {
    this.tests.push({ name, fn })
  }

  async run() {
    console.log('ğŸ® å¼€å§‹å¾·å·æ‰‘å…‹æ¸¸æˆé€»è¾‘æµ‹è¯•\\n')
    
    for (const { name, fn } of this.tests) {
      try {
        await fn()
        console.log(\`âœ… \${name}\`)
        this.passed++
      } catch (error) {
        console.log(\`âŒ \${name}: \${error.message}\`)
        this.failed++
      }
    }

    console.log(\`\\nğŸ“Š æµ‹è¯•ç»“æœ: \${this.passed} é€šè¿‡, \${this.failed} å¤±è´¥\`)
    return this.failed === 0
  }

  assert(condition, message) {
    if (!condition) {
      throw new Error(message)
    }
  }

  assertEqual(actual, expected, message) {
    if (actual !== expected) {
      throw new Error(\`\${message}: æœŸæœ› \${expected}, å®é™… \${actual}\`)
    }
  }
}

const test = new TestRunner()

// è·å–æ¸¸æˆæ¨¡å—ï¼ˆéœ€è¦åœ¨æ¸¸æˆé¡µé¢ä¸­è¿è¡Œï¼‰
 const getGameModules = () => {
   // å°è¯•ä»Vueåº”ç”¨å®ä¾‹è·å–
   const appElement = document.querySelector('#app')
   if (!appElement) {
     throw new Error('æœªæ‰¾åˆ°Vueåº”ç”¨ï¼Œè¯·ç¡®ä¿åœ¨æ¸¸æˆé¡µé¢è¿è¡Œæ­¤æµ‹è¯•')
   }
   
   const vueApp = appElement.__vue_app__
   if (!vueApp) {
     throw new Error('æ— æ³•è®¿é—®Vueåº”ç”¨å®ä¾‹')
   }
   
   // ä»Vueåº”ç”¨çš„æ ¹ç»„ä»¶è·å–æ¸¸æˆçŠ¶æ€å’Œé€»è¾‘
   const rootComponent = vueApp._instance
   if (!rootComponent) {
     throw new Error('æ— æ³•è®¿é—®Vueæ ¹ç»„ä»¶')
   }
   
   // è·å–ç»„ä»¶çš„exposedå±æ€§æˆ–setupState
   const componentState = rootComponent.exposed || rootComponent.setupState
   if (!componentState) {
     throw new Error('æ— æ³•è®¿é—®ç»„ä»¶çŠ¶æ€')
   }
   
   return {
     // ä»ç»„ä»¶çŠ¶æ€ä¸­è·å–æ¸¸æˆç›¸å…³çš„å±æ€§å’Œæ–¹æ³•
     gameState: componentState,
     // åˆ›å»ºä¸€ä¸ªæ¨¡æ‹Ÿçš„gameFinanceå¯¹è±¡ï¼Œä½¿ç”¨ç»„ä»¶ä¸­çš„çŠ¶æ€å’Œæ–¹æ³•
     gameFinance: {
       reset: () => componentState.resetGame && componentState.resetGame(),
       getState: () => ({
         playerChips: componentState.playerChips,
         opponentChips: componentState.opponentChips,
         pot: componentState.pot,
         playerBet: componentState.playerBet,
         opponentBet: componentState.opponentBet,
         currentStage: componentState.gameStage
       }),
       playerChips: componentState.playerChips,
       opponentChips: componentState.opponentChips,
       pot: componentState.pot,
       playerBet: componentState.playerBet,
       opponentBet: componentState.opponentBet,
       currentStage: componentState.gameStage,
       canCheck: (player) => player === 'player' ? componentState.canCheck : true,
       canCall: (player) => player === 'player' ? componentState.canCall : true,
       getCallAmount: (player) => player === 'player' ? componentState.callAmount : 0,
       playerCall: () => componentState.playerAction && componentState.playerAction('call'),
       playerRaise: (amount) => {
         if (componentState.updateRaiseAmount) componentState.updateRaiseAmount(amount)
         return componentState.playerAction && componentState.playerAction('raise')
       },
       opponentCall: () => ({ success: true }), // æ¨¡æ‹Ÿå¯¹æ‰‹è·Ÿæ³¨
       advanceStage: () => ({ success: true }), // æ¨¡æ‹Ÿé˜¶æ®µæ¨è¿›
       canAdvanceStage: () => true,
       distributePot: (winner) => ({ success: true }),
       whoActsFirst: (stage) => stage === 'preflop' ? 'opponent' : 'player',
       validateState: () => ({ isValid: true, errors: [] }),
       initializeNewHand: (position) => {
         if (componentState.startGame) componentState.startGame()
         return { success: true }
       }
     }
   }
 }

// æµ‹è¯•1: æ¸¸æˆçŠ¶æ€è®¿é—®æµ‹è¯•
 test.test('æ¸¸æˆçŠ¶æ€è®¿é—®æµ‹è¯•', () => {
   const { gameState } = getGameModules()
   if (!gameState) throw new Error('æ— æ³•è·å–æ¸¸æˆçŠ¶æ€')
   
   // æ£€æŸ¥åŸºæœ¬çŠ¶æ€æ˜¯å¦å­˜åœ¨
   test.assert(gameState.playerChips !== undefined, 'ç©å®¶ç­¹ç çŠ¶æ€åº”å­˜åœ¨')
   test.assert(gameState.opponentChips !== undefined, 'å¯¹æ‰‹ç­¹ç çŠ¶æ€åº”å­˜åœ¨')
   test.assert(gameState.pot !== undefined, 'åº•æ± çŠ¶æ€åº”å­˜åœ¨')
   test.assert(gameState.playerBet !== undefined, 'ç©å®¶ä¸‹æ³¨çŠ¶æ€åº”å­˜åœ¨')
   test.assert(gameState.opponentBet !== undefined, 'å¯¹æ‰‹ä¸‹æ³¨çŠ¶æ€åº”å­˜åœ¨')
 })

// æµ‹è¯•2: æ¸¸æˆåŠŸèƒ½æµ‹è¯•
 test.test('æ¸¸æˆå¼€å§‹åŠŸèƒ½æµ‹è¯•', () => {
   const { gameState } = getGameModules()
   
   // æ£€æŸ¥æ¸¸æˆå¼€å§‹åŠŸèƒ½
   test.assert(typeof gameState.startGame === 'function', 'å¼€å§‹æ¸¸æˆåŠŸèƒ½åº”å­˜åœ¨')
   test.assert(typeof gameState.resetGame === 'function', 'é‡ç½®æ¸¸æˆåŠŸèƒ½åº”å­˜åœ¨')
   test.assert(typeof gameState.playerAction === 'function', 'ç©å®¶è¡ŒåŠ¨åŠŸèƒ½åº”å­˜åœ¨')
 })
 
 test.test('æ¸¸æˆçŠ¶æ€æ•°å€¼æµ‹è¯•', () => {
   const { gameState } = getGameModules()
   
   // æ£€æŸ¥çŠ¶æ€æ•°å€¼çš„åˆç†æ€§
   test.assert(typeof gameState.playerChips === 'number' || gameState.playerChips?.value >= 0, 'ç©å®¶ç­¹ç åº”ä¸ºéè´Ÿæ•°')
   test.assert(typeof gameState.opponentChips === 'number' || gameState.opponentChips?.value >= 0, 'å¯¹æ‰‹ç­¹ç åº”ä¸ºéè´Ÿæ•°')
   test.assert(typeof gameState.pot === 'number' || gameState.pot?.value >= 0, 'åº•æ± åº”ä¸ºéè´Ÿæ•°')
 })

// æµ‹è¯•3: ç©å®¶è¡ŒåŠ¨é€»è¾‘
 test.test('ç©å®¶è¡ŒåŠ¨çŠ¶æ€æµ‹è¯•', () => {
   const { gameState } = getGameModules()
   
   // æ£€æŸ¥ç©å®¶è¡ŒåŠ¨ç›¸å…³çŠ¶æ€
   test.assert(gameState.canCheck !== undefined, 'çœ‹ç‰ŒçŠ¶æ€åº”å­˜åœ¨')
   test.assert(gameState.canCall !== undefined, 'è·Ÿæ³¨çŠ¶æ€åº”å­˜åœ¨')
   test.assert(gameState.playerTurn !== undefined, 'ç©å®¶å›åˆçŠ¶æ€åº”å­˜åœ¨')
   test.assert(gameState.callAmount !== undefined, 'è·Ÿæ³¨é‡‘é¢åº”å­˜åœ¨')
 })
 
 test.test('æ¸¸æˆé˜¶æ®µçŠ¶æ€æµ‹è¯•', () => {
   const { gameState } = getGameModules()
   
   // æ£€æŸ¥æ¸¸æˆé˜¶æ®µç›¸å…³çŠ¶æ€
   test.assert(gameState.gameStage !== undefined, 'æ¸¸æˆé˜¶æ®µçŠ¶æ€åº”å­˜åœ¨')
   test.assert(gameState.showdown !== undefined, 'æ‘Šç‰ŒçŠ¶æ€åº”å­˜åœ¨')
   test.assert(gameState.gameStarted !== undefined, 'æ¸¸æˆå¼€å§‹çŠ¶æ€åº”å­˜åœ¨')
 })

// æµ‹è¯•4: å¡ç‰ŒçŠ¶æ€æµ‹è¯•
 test.test('å¡ç‰ŒçŠ¶æ€æµ‹è¯•', () => {
   const { gameState } = getGameModules()
   
   // æ£€æŸ¥å¡ç‰Œç›¸å…³çŠ¶æ€
   test.assert(gameState.playerCards !== undefined, 'ç©å®¶æ‰‹ç‰ŒçŠ¶æ€åº”å­˜åœ¨')
   test.assert(gameState.opponentCards !== undefined, 'å¯¹æ‰‹æ‰‹ç‰ŒçŠ¶æ€åº”å­˜åœ¨')
   test.assert(gameState.communityCards !== undefined, 'å…¬å…±ç‰ŒçŠ¶æ€åº”å­˜åœ¨')
 })
 
 // æµ‹è¯•5: AIå’Œè°ƒè¯•åŠŸèƒ½æµ‹è¯•
 test.test('AIå’Œè°ƒè¯•åŠŸèƒ½æµ‹è¯•', () => {
   const { gameState } = getGameModules()
   
   // æ£€æŸ¥AIç›¸å…³åŠŸèƒ½
   test.assert(gameState.aiDifficulty !== undefined, 'AIéš¾åº¦è®¾ç½®åº”å­˜åœ¨')
   test.assert(gameState.showGTODebug !== undefined, 'GTOè°ƒè¯•çŠ¶æ€åº”å­˜åœ¨')
   test.assert(typeof gameState.setAIDifficulty === 'function', 'AIéš¾åº¦è®¾ç½®åŠŸèƒ½åº”å­˜åœ¨')
   test.assert(typeof gameState.toggleGTODebug === 'function', 'GTOè°ƒè¯•åˆ‡æ¢åŠŸèƒ½åº”å­˜åœ¨')
 })

// æµ‹è¯•6: èƒœç‡å’Œæ‰‹ç‰Œå¼ºåº¦æµ‹è¯•
 test.test('èƒœç‡å’Œæ‰‹ç‰Œå¼ºåº¦æµ‹è¯•', () => {
   const { gameState } = getGameModules()
   
   // æ£€æŸ¥èƒœç‡å’Œæ‰‹ç‰Œå¼ºåº¦ç›¸å…³çŠ¶æ€
   test.assert(gameState.playerWinRate !== undefined, 'ç©å®¶èƒœç‡åº”å­˜åœ¨')
   test.assert(gameState.handStrength !== undefined, 'æ‰‹ç‰Œå¼ºåº¦åº”å­˜åœ¨')
 })
 
 // æµ‹è¯•7: ç•Œé¢çŠ¶æ€æµ‹è¯•
 test.test('ç•Œé¢çŠ¶æ€æµ‹è¯•', () => {
   const { gameState } = getGameModules()
   
   // æ£€æŸ¥ç•Œé¢ç›¸å…³çŠ¶æ€
   test.assert(gameState.statusMessage !== undefined, 'çŠ¶æ€æ¶ˆæ¯åº”å­˜åœ¨')
   test.assert(gameState.raiseAmount !== undefined, 'åŠ æ³¨é‡‘é¢åº”å­˜åœ¨')
   test.assert(gameState.minRaise !== undefined, 'æœ€å°åŠ æ³¨åº”å­˜åœ¨')
 })
 
 // æµ‹è¯•8: åŠŸèƒ½å®Œæ•´æ€§æµ‹è¯•
 test.test('åŠŸèƒ½å®Œæ•´æ€§æµ‹è¯•', () => {
   const { gameState } = getGameModules()
   
   // æ£€æŸ¥æ‰€æœ‰ä¸»è¦åŠŸèƒ½æ˜¯å¦å­˜åœ¨
   const requiredFunctions = [
     'startGame', 'resetGame', 'playerAction', 
     'setQuickRaise', 'setAIDifficulty', 'toggleGTODebug'
   ]
   
   requiredFunctions.forEach(funcName => {
     test.assert(typeof gameState[funcName] === 'function', \`\${funcName}åŠŸèƒ½åº”å­˜åœ¨\`)
   })
 })
 
 // æµ‹è¯•9: å“åº”å¼çŠ¶æ€æµ‹è¯•
 test.test('å“åº”å¼çŠ¶æ€æµ‹è¯•', () => {
   const { gameState } = getGameModules()
   
   // æ£€æŸ¥Vueå“åº”å¼çŠ¶æ€çš„åŸºæœ¬ç‰¹å¾
   const checkReactiveState = (stateName) => {
     const state = gameState[stateName]
     return state !== undefined && (typeof state === 'object' && state.value !== undefined || typeof state !== 'object')
   }
   
   test.assert(checkReactiveState('gameStarted'), 'æ¸¸æˆå¼€å§‹çŠ¶æ€åº”ä¸ºå“åº”å¼')
   test.assert(checkReactiveState('playerTurn'), 'ç©å®¶å›åˆçŠ¶æ€åº”ä¸ºå“åº”å¼')
   test.assert(checkReactiveState('showdown'), 'æ‘Šç‰ŒçŠ¶æ€åº”ä¸ºå“åº”å¼')
 })

// è¿è¡Œæ‰€æœ‰æµ‹è¯•
console.log('ğŸš€ å¼€å§‹è¿è¡Œæµ‹è¯•...')
test.run().then(success => {
  if (success) {
    console.log('\\nğŸ‰ æ‰€æœ‰æµ‹è¯•é€šè¿‡ï¼æ¸¸æˆé€»è¾‘è¿è¡Œæ­£å¸¸ã€‚')
  } else {
    console.log('\\nâš ï¸ å‘ç°é—®é¢˜ï¼Œè¯·æ£€æŸ¥å¤±è´¥çš„æµ‹è¯•é¡¹ã€‚')
  }
})
`;

        document.getElementById('copyTestCode').addEventListener('click', () => {
            navigator.clipboard.writeText(testCode).then(() => {
                const btn = document.getElementById('copyTestCode');
                const originalText = btn.textContent;
                btn.textContent = 'âœ… å·²å¤åˆ¶';
                setTimeout(() => {
                    btn.textContent = originalText;
                }, 2000);
            }).catch(() => {
                alert('å¤åˆ¶å¤±è´¥ï¼Œè¯·æ‰‹åŠ¨å¤åˆ¶æ§åˆ¶å°ä¸­çš„ä»£ç ');
                console.log('=== å¾·å·æ‰‘å…‹æµ‹è¯•ä»£ç  ===');
                console.log(testCode);
            });
        });
        
        document.getElementById('openGamePage').addEventListener('click', () => {
            window.open('http://localhost:3000', '_blank');
        });
        
        // é¡µé¢åŠ è½½å®Œæˆåçš„æç¤º
        console.log('ğŸ® å¾·å·æ‰‘å…‹æµ‹è¯•å¥—ä»¶å·²å‡†å¤‡å°±ç»ª');
        console.log('ä½¿ç”¨æ­¥éª¤ï¼š');
        console.log('1. ç‚¹å‡»"æ‰“å¼€æ¸¸æˆé¡µé¢"æŒ‰é’®');
        console.log('2. åœ¨æ¸¸æˆé¡µé¢æŒ‰F12æ‰“å¼€å¼€å‘è€…å·¥å…·');
        console.log('3. ç‚¹å‡»"å¤åˆ¶æµ‹è¯•ä»£ç "æŒ‰é’®');
        console.log('4. åœ¨æ¸¸æˆé¡µé¢çš„æ§åˆ¶å°ä¸­ç²˜è´´å¹¶è¿è¡Œæµ‹è¯•ä»£ç ');
    </script>
</body>
</html>