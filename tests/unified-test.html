<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>å¾·å·æ‰‘å…‹æ¸¸æˆç»Ÿä¸€æµ‹è¯•å¹³å°</title>
    <style>
        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            max-width: 1400px;
            margin: 0 auto;
            padding: 20px;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            min-height: 100vh;
        }
        
        .container {
            background: rgba(255, 255, 255, 0.1);
            border-radius: 15px;
            padding: 30px;
            backdrop-filter: blur(10px);
            box-shadow: 0 8px 32px rgba(0, 0, 0, 0.3);
        }
        
        h1 {
            text-align: center;
            margin-bottom: 30px;
            font-size: 2.5em;
            text-shadow: 2px 2px 4px rgba(0, 0, 0, 0.3);
        }
        
        .test-tabs {
            display: flex;
            justify-content: center;
            margin-bottom: 30px;
            flex-wrap: wrap;
            gap: 10px;
        }
        
        .tab-button {
            background: rgba(255, 255, 255, 0.2);
            color: white;
            border: none;
            padding: 12px 24px;
            border-radius: 25px;
            cursor: pointer;
            transition: all 0.3s ease;
            font-weight: bold;
        }
        
        .tab-button:hover {
            background: rgba(255, 255, 255, 0.3);
            transform: translateY(-2px);
        }
        
        .tab-button.active {
            background: linear-gradient(45deg, #4CAF50, #45a049);
            box-shadow: 0 4px 15px rgba(0, 0, 0, 0.2);
        }
        
        .test-section {
            display: none;
            background: rgba(255, 255, 255, 0.05);
            border-radius: 15px;
            padding: 25px;
            margin-bottom: 20px;
        }
        
        .test-section.active {
            display: block;
        }
        
        .test-controls {
            text-align: center;
            margin-bottom: 20px;
        }
        
        .control-button {
            background: linear-gradient(45deg, #667eea, #764ba2);
            color: white;
            border: none;
            padding: 12px 24px;
            font-size: 16px;
            border-radius: 25px;
            cursor: pointer;
            transition: all 0.3s ease;
            margin: 5px;
            font-weight: bold;
        }
        
        .control-button:hover {
            transform: translateY(-2px);
            box-shadow: 0 6px 20px rgba(0, 0, 0, 0.3);
        }
        
        .control-button:disabled {
            background: #666;
            cursor: not-allowed;
            transform: none;
        }
        
        .control-button.success {
            background: linear-gradient(45deg, #4CAF50, #45a049);
        }
        
        .control-button.danger {
            background: linear-gradient(45deg, #f44336, #d32f2f);
        }
        
        .test-output {
            background: rgba(0, 0, 0, 0.4);
            border-radius: 10px;
            padding: 20px;
            font-family: 'Courier New', monospace;
            font-size: 14px;
            line-height: 1.6;
            white-space: pre-wrap;
            max-height: 500px;
            overflow-y: auto;
            border: 1px solid rgba(255, 255, 255, 0.2);
            margin-top: 15px;
        }
        
        .test-result {
            padding: 10px;
            margin: 5px 0;
            border-radius: 8px;
            font-family: monospace;
        }
        
        .pass {
            background-color: rgba(76, 175, 80, 0.3);
            color: #4CAF50;
            border: 1px solid #4CAF50;
        }
        
        .fail {
            background-color: rgba(244, 67, 54, 0.3);
            color: #f44336;
            border: 1px solid #f44336;
        }
        
        .info {
            background-color: rgba(33, 150, 243, 0.3);
            color: #2196F3;
            border: 1px solid #2196F3;
        }
        
        .warning {
            background-color: rgba(255, 152, 0, 0.3);
            color: #FF9800;
            border: 1px solid #FF9800;
        }
        
        .test-summary {
            margin-top: 20px;
            padding: 15px;
            border-radius: 10px;
            text-align: center;
            font-weight: bold;
            font-size: 16px;
        }
        
        .test-summary.success {
            background: rgba(76, 175, 80, 0.3);
            border: 2px solid #4CAF50;
        }
        
        .test-summary.failure {
            background: rgba(244, 67, 54, 0.3);
            border: 2px solid #f44336;
        }
        
        .test-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 15px;
            margin-bottom: 20px;
        }
        
        .test-card {
            background: rgba(255, 255, 255, 0.1);
            border-radius: 10px;
            padding: 20px;
            border-left: 4px solid #2196F3;
        }
        
        .test-card h4 {
            margin-top: 0;
            color: #2196F3;
        }
        
        .scenario {
            border-left: 4px solid #FF9800;
            padding-left: 15px;
            margin: 15px 0;
            background: rgba(255, 152, 0, 0.1);
            border-radius: 5px;
            padding: 10px 15px;
        }
        
        .game-frame {
            width: 100%;
            height: 600px;
            border: 2px solid #667eea;
            border-radius: 10px;
            margin: 20px 0;
        }
        
        .debug-panel {
            background: rgba(0, 0, 0, 0.3);
            border-radius: 10px;
            padding: 20px;
            margin-top: 15px;
            border: 1px solid rgba(255, 255, 255, 0.2);
        }
        
        .status-indicator {
            display: inline-block;
            width: 12px;
            height: 12px;
            border-radius: 50%;
            margin-right: 8px;
        }
        
        .status-ok { background: #4caf50; }
        .status-error { background: #f44336; }
        .status-warning { background: #ff9800; }
        
        .instructions {
            background: rgba(255, 255, 255, 0.1);
            border-radius: 10px;
            padding: 20px;
            margin-bottom: 20px;
            border-left: 4px solid #FFC107;
        }
        
        .instructions h3 {
            margin-top: 0;
            color: #FFC107;
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>ğŸ® å¾·å·æ‰‘å…‹æ¸¸æˆç»Ÿä¸€æµ‹è¯•å¹³å°</h1>
        
        <div class="test-tabs">
            <button class="tab-button active" onclick="showTab('gameLogic')">ğŸ¯ æ¸¸æˆé€»è¾‘æµ‹è¯•</button>
            <button class="tab-button" onclick="showTab('chipSettlement')">ğŸ’° ç­¹ç ç»“ç®—æµ‹è¯•</button>
            <button class="tab-button" onclick="showTab('aiAnalysis')">ğŸ¤– AIåˆ†ææµ‹è¯•</button>
            <button class="tab-button" onclick="showTab('debugging')">ğŸ” è°ƒè¯•å·¥å…·</button>
            <button class="tab-button" onclick="showTab('integration')">ğŸ”— é›†æˆæµ‹è¯•</button>
        </div>
        
        <!-- æ¸¸æˆé€»è¾‘æµ‹è¯• -->
        <div id="gameLogic" class="test-section active">
            <h2>ğŸ¯ æ¸¸æˆé€»è¾‘æµ‹è¯•</h2>
            
            <div class="instructions">
                <h3>ğŸ“ ä½¿ç”¨è¯´æ˜</h3>
                <p>è¿™ä¸ªæµ‹è¯•éœ€è¦åœ¨æ¸¸æˆè¿è¡Œæ—¶æ‰§è¡Œï¼Œè¯·æŒ‰ä»¥ä¸‹æ­¥éª¤æ“ä½œï¼š</p>
                <ol>
                    <li>ç¡®ä¿æ¸¸æˆæœåŠ¡å™¨æ­£åœ¨è¿è¡Œ (http://localhost:3001)</li>
                    <li>ç‚¹å‡»ä¸‹æ–¹æŒ‰é’®æ‰“å¼€æ¸¸æˆé¡µé¢</li>
                    <li>è¿è¡Œç›¸åº”çš„æµ‹è¯•ç”¨ä¾‹</li>
                </ol>
            </div>
            
            <div class="test-controls">
                <button class="control-button" onclick="openGamePage()">ğŸ® æ‰“å¼€æ¸¸æˆé¡µé¢</button>
                <button class="control-button success" onclick="runGameLogicTests()">ğŸ§ª è¿è¡Œæ¸¸æˆé€»è¾‘æµ‹è¯•</button>
                <button class="control-button" onclick="clearOutput('gameLogicOutput')">ğŸ—‘ï¸ æ¸…é™¤è¾“å‡º</button>
            </div>
            
            <div class="test-grid">
                <div class="test-card">
                    <h4>ğŸ¯ åŸºç¡€åŠŸèƒ½æµ‹è¯•</h4>
                    <ul>
                        <li>æ¸¸æˆåˆå§‹åŒ–</li>
                        <li>ç›²æ³¨æ”¶å–æœºåˆ¶</li>
                        <li>ç­¹ç ç®¡ç†</li>
                        <li>åº•æ± åˆ†é…</li>
                    </ul>
                </div>
                
                <div class="test-card">
                    <h4>ğŸ² æ¸¸æˆé€»è¾‘æµ‹è¯•</h4>
                    <ul>
                        <li>çœ‹ç‰Œ/è·Ÿæ³¨/åŠ æ³¨é€»è¾‘</li>
                        <li>é˜¶æ®µæ¨è¿›æœºåˆ¶</li>
                        <li>è¡ŒåŠ¨æƒåˆ¤æ–­</li>
                        <li>æ¸¸æˆçŠ¶æ€ä¸€è‡´æ€§</li>
                    </ul>
                </div>
                
                <div class="test-card">
                    <h4>ğŸ¤– AIæµ‹è¯•</h4>
                    <ul>
                        <li>AIå†³ç­–ç®—æ³•</li>
                        <li>éš¾åº¦çº§åˆ«</li>
                        <li>å†³ç­–åˆç†æ€§</li>
                    </ul>
                </div>
                
                <div class="test-card">
                    <h4>ğŸ” è¾¹ç•Œæƒ…å†µæµ‹è¯•</h4>
                    <ul>
                        <li>ç­¹ç ä¸è¶³å¤„ç†</li>
                        <li>å…¨ä¸‹é€»è¾‘</li>
                        <li>å¼‚å¸¸æƒ…å†µå¤„ç†</li>
                    </ul>
                </div>
            </div>
            
            <div id="gameLogicOutput" class="test-output">ç­‰å¾…æµ‹è¯•...</div>
        </div>
        
        <!-- ç­¹ç ç»“ç®—æµ‹è¯• -->
        <div id="chipSettlement" class="test-section">
            <h2>ğŸ’° ç­¹ç ç»“ç®—æµ‹è¯•</h2>
            
            <div class="test-controls">
                <button class="control-button success" onclick="runChipSettlementTests()">ğŸ§ª è¿è¡Œç­¹ç ç»“ç®—æµ‹è¯•</button>
                <button class="control-button" onclick="testSpecificScenario()">ğŸ¯ æµ‹è¯•ç‰¹å®šåœºæ™¯</button>
                <button class="control-button" onclick="clearOutput('chipOutput')">ğŸ—‘ï¸ æ¸…é™¤è¾“å‡º</button>
            </div>
            
            <div class="scenario">
                <h4>æµ‹è¯•åœºæ™¯è¯´æ˜</h4>
                <p>ç­¹ç ç»“ç®—æµ‹è¯•éªŒè¯ä»¥ä¸‹åœºæ™¯ï¼š</p>
                <ul>
                    <li>ç©å®¶è·èƒœæ—¶çš„ç­¹ç åˆ†é…</li>
                    <li>å¯¹æ‰‹è·èƒœæ—¶çš„ç­¹ç åˆ†é…</li>
                    <li>å¹³å±€æ—¶çš„ç­¹ç åˆ†é…</li>
                    <li>ç­¹ç å®ˆæ’å®šå¾‹éªŒè¯</li>
                    <li>å¥‡æ•°åº•æ± çš„å¤„ç†</li>
                </ul>
            </div>
            
            <div id="chipOutput" class="test-output">ç­‰å¾…æµ‹è¯•...</div>
        </div>
        
        <!-- AIåˆ†ææµ‹è¯• -->
        <div id="aiAnalysis" class="test-section">
            <h2>ğŸ¤– AIåˆ†ææµ‹è¯•</h2>
            
            <div class="test-controls">
                <button class="control-button success" onclick="runAIAnalysisTests()">ğŸ§ª è¿è¡ŒAIåˆ†ææµ‹è¯•</button>
                <button class="control-button" onclick="testAIButton()">ğŸ”˜ æµ‹è¯•AIåˆ†ææŒ‰é’®</button>
                <button class="control-button" onclick="simulateAIClick()">ğŸ–±ï¸ æ¨¡æ‹ŸæŒ‰é’®ç‚¹å‡»</button>
                <button class="control-button" onclick="clearOutput('aiOutput')">ğŸ—‘ï¸ æ¸…é™¤è¾“å‡º</button>
            </div>
            
            <div class="test-grid">
                <div class="test-card">
                    <h4>ğŸ”˜ æŒ‰é’®åŠŸèƒ½æµ‹è¯•</h4>
                    <button id="testAIButton" class="control-button">AIåˆ†æ</button>
                    <div class="debug-panel" id="testDebugPanel" style="display: none;">
                        <h4>AIè°ƒè¯•é¢æ¿</h4>
                        <p>è¿™æ˜¯AIåˆ†æé¢æ¿çš„æµ‹è¯•å†…å®¹</p>
                    </div>
                </div>
                
                <div class="test-card">
                    <h4>ğŸ” çŠ¶æ€æ£€æŸ¥</h4>
                    <ul>
                        <li>æŒ‰é’®ç‚¹å‡»å“åº”</li>
                        <li>çŠ¶æ€åˆ‡æ¢æ­£ç¡®æ€§</li>
                        <li>é¢æ¿æ˜¾ç¤º/éšè—</li>
                        <li>äº‹ä»¶ä¼ é€’æœºåˆ¶</li>
                    </ul>
                </div>
            </div>
            
            <div id="aiOutput" class="test-output">ç­‰å¾…æµ‹è¯•...</div>
        </div>
        
        <!-- è°ƒè¯•å·¥å…· -->
        <div id="debugging" class="test-section">
            <h2>ğŸ” è°ƒè¯•å·¥å…·</h2>
            
            <div class="test-controls">
                <button class="control-button" onclick="checkGameState()">ğŸ® æ£€æŸ¥æ¸¸æˆçŠ¶æ€</button>
                <button class="control-button" onclick="checkVueComponents()">ğŸ”§ æ£€æŸ¥Vueç»„ä»¶</button>
                <button class="control-button" onclick="checkEventHandlers()">ğŸ“¡ æ£€æŸ¥äº‹ä»¶å¤„ç†å™¨</button>
                <button class="control-button danger" onclick="enableDebugMode()">ğŸ› å¯ç”¨è°ƒè¯•æ¨¡å¼</button>
                <button class="control-button" onclick="clearOutput('debugOutput')">ğŸ—‘ï¸ æ¸…é™¤è¾“å‡º</button>
            </div>
            
            <div class="test-grid">
                <div class="test-card">
                    <h4>ğŸ® æ¸¸æˆçŠ¶æ€æ£€æŸ¥</h4>
                    <ul>
                        <li>Vueåº”ç”¨å®ä¾‹çŠ¶æ€</li>
                        <li>æ¸¸æˆé€»è¾‘çŠ¶æ€</li>
                        <li>ç»„ä»¶é€šä¿¡çŠ¶æ€</li>
                    </ul>
                </div>
                
                <div class="test-card">
                    <h4>ğŸ”§ ç»„ä»¶è¯Šæ–­</h4>
                    <ul>
                        <li>ç»„ä»¶æŒ‚è½½çŠ¶æ€</li>
                        <li>Propsä¼ é€’æ£€æŸ¥</li>
                        <li>äº‹ä»¶ç»‘å®šéªŒè¯</li>
                    </ul>
                </div>
            </div>
            
            <div id="debugOutput" class="test-output">ç­‰å¾…è°ƒè¯•...</div>
        </div>
        
        <!-- é›†æˆæµ‹è¯• -->
        <div id="integration" class="test-section">
            <h2>ğŸ”— é›†æˆæµ‹è¯•</h2>
            
            <div class="test-controls">
                <button class="control-button success" onclick="runFullIntegrationTest()">ğŸš€ è¿è¡Œå®Œæ•´é›†æˆæµ‹è¯•</button>
                <button class="control-button" onclick="loadGameInFrame()">ğŸ“± åœ¨æ¡†æ¶ä¸­åŠ è½½æ¸¸æˆ</button>
                <button class="control-button" onclick="clearOutput('integrationOutput')">ğŸ—‘ï¸ æ¸…é™¤è¾“å‡º</button>
            </div>
            
            <iframe id="gameFrame" class="game-frame" style="display: none;"></iframe>
            
            <div id="integrationOutput" class="test-output">ç­‰å¾…é›†æˆæµ‹è¯•...</div>
        </div>
    </div>

    <script>
        // å…¨å±€å˜é‡
        let gameWindow = null;
        let debugMode = false;
        let testResults = [];
        
        // æ ‡ç­¾é¡µåˆ‡æ¢
        function showTab(tabName) {
            // éšè—æ‰€æœ‰æµ‹è¯•åŒºåŸŸ
            const sections = document.querySelectorAll('.test-section');
            sections.forEach(section => section.classList.remove('active'));
            
            // ç§»é™¤æ‰€æœ‰æŒ‰é’®çš„activeç±»
            const buttons = document.querySelectorAll('.tab-button');
            buttons.forEach(button => button.classList.remove('active'));
            
            // æ˜¾ç¤ºé€‰ä¸­çš„æµ‹è¯•åŒºåŸŸ
            document.getElementById(tabName).classList.add('active');
            
            // æ¿€æ´»å¯¹åº”çš„æŒ‰é’®
            event.target.classList.add('active');
        }
        
        // é€šç”¨æ—¥å¿—å‡½æ•°
        function log(message, type = 'info', outputId = 'gameLogicOutput') {
            const timestamp = new Date().toLocaleTimeString();
            const logEntry = `[${timestamp}] ${message}`;
            console.log(logEntry);
            
            const output = document.getElementById(outputId);
            const logDiv = document.createElement('div');
            logDiv.className = `test-result ${type}`;
            logDiv.innerHTML = `<strong>${timestamp}</strong> ${message}`;
            output.appendChild(logDiv);
            output.scrollTop = output.scrollHeight;
        }
        
        // æ¸…é™¤è¾“å‡º
        function clearOutput(outputId) {
            document.getElementById(outputId).innerHTML = 'è¾“å‡ºå·²æ¸…é™¤...';
        }
        
        // æ‰“å¼€æ¸¸æˆé¡µé¢
        function openGamePage() {
            try {
                gameWindow = window.open('http://localhost:3001/', 'gameWindow');
                log('æ¸¸æˆé¡µé¢å·²åœ¨æ–°çª—å£æ‰“å¼€', 'pass');
            } catch (error) {
                log(`æ‰“å¼€æ¸¸æˆé¡µé¢å¤±è´¥: ${error.message}`, 'fail');
            }
        }
        
        // æ¸¸æˆé€»è¾‘æµ‹è¯•
        function runGameLogicTests() {
            log('å¼€å§‹è¿è¡Œæ¸¸æˆé€»è¾‘æµ‹è¯•...', 'info');
            
            // ç®€å•çš„æµ‹è¯•æ¡†æ¶
            class TestRunner {
                constructor() {
                    this.results = [];
                }
                
                test(name, testFn) {
                    try {
                        testFn();
                        this.results.push({ name, status: 'pass', message: 'æµ‹è¯•é€šè¿‡' });
                        log(`âœ“ ${name}: æµ‹è¯•é€šè¿‡`, 'pass');
                    } catch (error) {
                        this.results.push({ name, status: 'fail', message: error.message });
                        log(`âœ— ${name}: ${error.message}`, 'fail');
                    }
                }
                
                assert(condition, message) {
                    if (!condition) {
                        throw new Error(message || 'æ–­è¨€å¤±è´¥');
                    }
                }
                
                assertEqual(actual, expected, message) {
                    if (actual !== expected) {
                        throw new Error(`${message || 'å€¼ä¸ç›¸ç­‰'}: æœŸæœ› ${expected}, å®é™… ${actual}`);
                    }
                }
            }
            
            const runner = new TestRunner();
            
            // åŸºç¡€åŠŸèƒ½æµ‹è¯•
            runner.test('æ¸¸æˆçŠ¶æ€åˆå§‹åŒ–', () => {
                runner.assert(typeof window !== 'undefined', 'æµè§ˆå™¨ç¯å¢ƒæ£€æŸ¥');
                runner.assert(document.querySelector, 'DOM APIå¯ç”¨');
            });
            
            runner.test('Vueæ¡†æ¶æ£€æŸ¥', () => {
                runner.assert(typeof Vue !== 'undefined' || window.Vue, 'Vueæ¡†æ¶å·²åŠ è½½');
            });
            
            runner.test('æ¸¸æˆæ¨¡å—æ£€æŸ¥', () => {
                // è¿™é‡Œéœ€è¦åœ¨æ¸¸æˆé¡µé¢ä¸­è¿è¡Œ
                log('æ³¨æ„: éƒ¨åˆ†æµ‹è¯•éœ€è¦åœ¨æ¸¸æˆé¡µé¢ä¸­è¿è¡Œ', 'warning');
            });
            
            // æ˜¾ç¤ºæµ‹è¯•æ€»ç»“
            const passed = runner.results.filter(r => r.status === 'pass').length;
            const total = runner.results.length;
            
            if (passed === total) {
                log(`ğŸ‰ æ‰€æœ‰æµ‹è¯•é€šè¿‡! (${passed}/${total})`, 'pass');
            } else {
                log(`âš ï¸ éƒ¨åˆ†æµ‹è¯•å¤±è´¥ (${passed}/${total})`, 'warning');
            }
        }
        
        // ç­¹ç ç»“ç®—æµ‹è¯•
        function runChipSettlementTests() {
            log('å¼€å§‹è¿è¡Œç­¹ç ç»“ç®—æµ‹è¯•...', 'info', 'chipOutput');
            
            // æ¨¡æ‹Ÿç­¹ç ç»“ç®—é€»è¾‘
            class MockGameFinance {
                constructor() {
                    this.playerChips = 1000;
                    this.opponentChips = 1000;
                    this.pot = 0;
                    this.playerBet = 0;
                    this.opponentBet = 0;
                }
                
                playerRaise(amount) {
                    if (this.playerChips >= amount) {
                        this.playerChips -= amount;
                        this.playerBet += amount;
                        this.pot += amount;
                        return true;
                    }
                    return false;
                }
                
                opponentRaise(amount) {
                    if (this.opponentChips >= amount) {
                        this.opponentChips -= amount;
                        this.opponentBet += amount;
                        this.pot += amount;
                        return true;
                    }
                    return false;
                }
                
                distributePot(winner) {
                    const totalChips = this.playerChips + this.opponentChips + this.pot;
                    
                    if (winner === 'player') {
                        this.playerChips += this.pot;
                    } else if (winner === 'opponent') {
                        this.opponentChips += this.pot;
                    } else if (winner === 'tie') {
                        const halfPot = Math.floor(this.pot / 2);
                        this.playerChips += halfPot;
                        this.opponentChips += this.pot - halfPot;
                    }
                    
                    this.pot = 0;
                    this.playerBet = 0;
                    this.opponentBet = 0;
                    
                    return totalChips === this.playerChips + this.opponentChips;
                }
            }
            
            const finance = new MockGameFinance();
            
            // æµ‹è¯•åœºæ™¯1: ç©å®¶è·èƒœ
            log('æµ‹è¯•åœºæ™¯1: ç©å®¶è·èƒœ', 'info', 'chipOutput');
            finance.playerRaise(50);
            finance.opponentRaise(50);
            const conserved1 = finance.distributePot('player');
            log(`ç©å®¶ç­¹ç : ${finance.playerChips}, å¯¹æ‰‹ç­¹ç : ${finance.opponentChips}`, 'info', 'chipOutput');
            log(`ç­¹ç å®ˆæ’: ${conserved1 ? 'âœ“' : 'âœ—'}`, conserved1 ? 'pass' : 'fail', 'chipOutput');
            
            // æµ‹è¯•åœºæ™¯2: å¯¹æ‰‹è·èƒœ
            log('æµ‹è¯•åœºæ™¯2: å¯¹æ‰‹è·èƒœ', 'info', 'chipOutput');
            finance.playerRaise(30);
            finance.opponentRaise(30);
            const conserved2 = finance.distributePot('opponent');
            log(`ç©å®¶ç­¹ç : ${finance.playerChips}, å¯¹æ‰‹ç­¹ç : ${finance.opponentChips}`, 'info', 'chipOutput');
            log(`ç­¹ç å®ˆæ’: ${conserved2 ? 'âœ“' : 'âœ—'}`, conserved2 ? 'pass' : 'fail', 'chipOutput');
            
            // æµ‹è¯•åœºæ™¯3: å¹³å±€
            log('æµ‹è¯•åœºæ™¯3: å¹³å±€', 'info', 'chipOutput');
            finance.playerRaise(25);
            finance.opponentRaise(25);
            const conserved3 = finance.distributePot('tie');
            log(`ç©å®¶ç­¹ç : ${finance.playerChips}, å¯¹æ‰‹ç­¹ç : ${finance.opponentChips}`, 'info', 'chipOutput');
            log(`ç­¹ç å®ˆæ’: ${conserved3 ? 'âœ“' : 'âœ—'}`, conserved3 ? 'pass' : 'fail', 'chipOutput');
            
            log('ğŸ° ç­¹ç ç»“ç®—æµ‹è¯•å®Œæˆ', 'pass', 'chipOutput');
        }
        
        // æµ‹è¯•ç‰¹å®šåœºæ™¯
        function testSpecificScenario() {
            log('è¿è¡Œç‰¹å®šç­¹ç åœºæ™¯æµ‹è¯•...', 'info', 'chipOutput');
            
            // æµ‹è¯•å¥‡æ•°åº•æ± 
            log('æµ‹è¯•å¥‡æ•°åº•æ± åˆ†é…...', 'info', 'chipOutput');
            const finance = {
                pot: 101,
                playerChips: 500,
                opponentChips: 500
            };
            
            const halfPot = Math.floor(finance.pot / 2);
            const playerGets = halfPot;
            const opponentGets = finance.pot - halfPot;
            
            log(`åº•æ± : ${finance.pot}, ç©å®¶è·å¾—: ${playerGets}, å¯¹æ‰‹è·å¾—: ${opponentGets}`, 'info', 'chipOutput');
            log(`å¥‡æ•°å¤„ç†: ${opponentGets > playerGets ? 'âœ“ å¯¹æ‰‹å¤šè·å¾—1ç­¹ç ' : 'âœ—'}`, 'pass', 'chipOutput');
        }
        
        // AIåˆ†ææµ‹è¯•
        function runAIAnalysisTests() {
            log('å¼€å§‹è¿è¡ŒAIåˆ†ææµ‹è¯•...', 'info', 'aiOutput');
            
            // æµ‹è¯•æœ¬åœ°AIæŒ‰é’®
            const testButton = document.getElementById('testAIButton');
            const testPanel = document.getElementById('testDebugPanel');
            
            if (testButton && testPanel) {
                log('âœ“ AIåˆ†ææŒ‰é’®å’Œé¢æ¿å…ƒç´ å­˜åœ¨', 'pass', 'aiOutput');
                
                // æµ‹è¯•ç‚¹å‡»äº‹ä»¶
                testButton.addEventListener('click', function() {
                    const isVisible = testPanel.style.display !== 'none';
                    testPanel.style.display = isVisible ? 'none' : 'block';
                    this.classList.toggle('active');
                    log(`AIé¢æ¿çŠ¶æ€åˆ‡æ¢: ${isVisible ? 'éšè—' : 'æ˜¾ç¤º'}`, 'pass', 'aiOutput');
                });
                
                log('âœ“ AIåˆ†ææŒ‰é’®äº‹ä»¶ç›‘å¬å™¨å·²ç»‘å®š', 'pass', 'aiOutput');
            } else {
                log('âœ— AIåˆ†ææŒ‰é’®æˆ–é¢æ¿å…ƒç´ æœªæ‰¾åˆ°', 'fail', 'aiOutput');
            }
        }
        
        // æµ‹è¯•AIæŒ‰é’®
        function testAIButton() {
            log('æµ‹è¯•AIåˆ†ææŒ‰é’®åŠŸèƒ½...', 'info', 'aiOutput');
            
            const testButton = document.getElementById('testAIButton');
            if (testButton) {
                testButton.click();
                log('âœ“ AIæŒ‰é’®ç‚¹å‡»äº‹ä»¶å·²è§¦å‘', 'pass', 'aiOutput');
            } else {
                log('âœ— AIæŒ‰é’®æœªæ‰¾åˆ°', 'fail', 'aiOutput');
            }
        }
        
        // æ¨¡æ‹ŸAIæŒ‰é’®ç‚¹å‡»
        function simulateAIClick() {
            if (!gameWindow || gameWindow.closed) {
                log('è¯·å…ˆæ‰“å¼€æ¸¸æˆé¡µé¢', 'warning', 'aiOutput');
                return;
            }
            
            try {
                const gameDoc = gameWindow.document;
                const aiButton = gameDoc.querySelector('.gto-debug-toggle');
                
                if (aiButton) {
                    log('åœ¨æ¸¸æˆé¡µé¢ä¸­æ‰¾åˆ°AIåˆ†ææŒ‰é’®', 'info', 'aiOutput');
                    aiButton.click();
                    log('âœ“ AIåˆ†ææŒ‰é’®ç‚¹å‡»äº‹ä»¶å·²è§¦å‘', 'pass', 'aiOutput');
                } else {
                    log('âœ— åœ¨æ¸¸æˆé¡µé¢ä¸­æœªæ‰¾åˆ°AIåˆ†ææŒ‰é’®', 'fail', 'aiOutput');
                }
            } catch (error) {
                log(`æ¨¡æ‹Ÿç‚¹å‡»å¤±è´¥: ${error.message}`, 'fail', 'aiOutput');
            }
        }
        
        // æ£€æŸ¥æ¸¸æˆçŠ¶æ€
        function checkGameState() {
            log('æ£€æŸ¥æ¸¸æˆçŠ¶æ€...', 'info', 'debugOutput');
            
            if (!gameWindow || gameWindow.closed) {
                log('æ¸¸æˆé¡µé¢æœªæ‰“å¼€', 'warning', 'debugOutput');
                return;
            }
            
            try {
                const gameDoc = gameWindow.document;
                const vueApp = gameDoc.querySelector('#app');
                
                if (vueApp) {
                    log('âœ“ Vueåº”ç”¨å·²æ‰¾åˆ°', 'pass', 'debugOutput');
                    log(`é¡µé¢æ ‡é¢˜: ${gameDoc.title}`, 'info', 'debugOutput');
                    log(`é¡µé¢URL: ${gameWindow.location.href}`, 'info', 'debugOutput');
                } else {
                    log('âœ— Vueåº”ç”¨æœªæ‰¾åˆ°', 'fail', 'debugOutput');
                }
            } catch (error) {
                log(`æ£€æŸ¥æ¸¸æˆçŠ¶æ€å¤±è´¥: ${error.message}`, 'fail', 'debugOutput');
            }
        }
        
        // æ£€æŸ¥Vueç»„ä»¶
        function checkVueComponents() {
            log('æ£€æŸ¥Vueç»„ä»¶çŠ¶æ€...', 'info', 'debugOutput');
            
            if (!gameWindow || gameWindow.closed) {
                log('è¯·å…ˆæ‰“å¼€æ¸¸æˆé¡µé¢', 'warning', 'debugOutput');
                return;
            }
            
            try {
                const gameDoc = gameWindow.document;
                const components = [
                    '.game-controls',
                    '.ai-debug-panel',
                    '.player-area',
                    '.opponent-area'
                ];
                
                components.forEach(selector => {
                    const element = gameDoc.querySelector(selector);
                    if (element) {
                        log(`âœ“ ç»„ä»¶ ${selector} å·²æ‰¾åˆ°`, 'pass', 'debugOutput');
                    } else {
                        log(`âœ— ç»„ä»¶ ${selector} æœªæ‰¾åˆ°`, 'fail', 'debugOutput');
                    }
                });
            } catch (error) {
                log(`æ£€æŸ¥Vueç»„ä»¶å¤±è´¥: ${error.message}`, 'fail', 'debugOutput');
            }
        }
        
        // æ£€æŸ¥äº‹ä»¶å¤„ç†å™¨
        function checkEventHandlers() {
            log('æ£€æŸ¥äº‹ä»¶å¤„ç†å™¨...', 'info', 'debugOutput');
            
            log('äº‹ä»¶å¤„ç†å™¨æ£€æŸ¥æ¸…å•:', 'info', 'debugOutput');
            log('1. GameControlsç»„ä»¶å‘å‡º toggle-gto-debug äº‹ä»¶', 'info', 'debugOutput');
            log('2. App.vueç›‘å¬è¯¥äº‹ä»¶å¹¶è°ƒç”¨ toggleGTODebug æ–¹æ³•', 'info', 'debugOutput');
            log('3. toggleGTODebug æ–¹æ³•åˆ‡æ¢ showGTODebug çŠ¶æ€', 'info', 'debugOutput');
            log('4. AIDebugPanelæ ¹æ® showGTODebug æ˜¾ç¤º/éšè—', 'info', 'debugOutput');
        }
        
        // å¯ç”¨è°ƒè¯•æ¨¡å¼
        function enableDebugMode() {
            debugMode = true;
            log('ğŸ› è°ƒè¯•æ¨¡å¼å·²å¯ç”¨', 'warning', 'debugOutput');
            log('ç°åœ¨æ‰€æœ‰æ“ä½œéƒ½ä¼šè®°å½•è¯¦ç»†æ—¥å¿—', 'info', 'debugOutput');
        }
        
        // åœ¨æ¡†æ¶ä¸­åŠ è½½æ¸¸æˆ
        function loadGameInFrame() {
            const gameFrame = document.getElementById('gameFrame');
            gameFrame.src = 'http://localhost:3001/';
            gameFrame.style.display = 'block';
            log('æ¸¸æˆå·²åŠ è½½åˆ°iframeä¸­', 'pass', 'integrationOutput');
            
            gameFrame.onload = function() {
                log('æ¸¸æˆé¡µé¢åœ¨iframeä¸­åŠ è½½å®Œæˆ', 'pass', 'integrationOutput');
            };
        }
        
        // è¿è¡Œå®Œæ•´é›†æˆæµ‹è¯•
        function runFullIntegrationTest() {
            log('å¼€å§‹è¿è¡Œå®Œæ•´é›†æˆæµ‹è¯•...', 'info', 'integrationOutput');
            
            // ä¾æ¬¡è¿è¡Œæ‰€æœ‰æµ‹è¯•
            setTimeout(() => {
                log('1/4 è¿è¡Œæ¸¸æˆé€»è¾‘æµ‹è¯•...', 'info', 'integrationOutput');
                runGameLogicTests();
            }, 500);
            
            setTimeout(() => {
                log('2/4 è¿è¡Œç­¹ç ç»“ç®—æµ‹è¯•...', 'info', 'integrationOutput');
                runChipSettlementTests();
            }, 1500);
            
            setTimeout(() => {
                log('3/4 è¿è¡ŒAIåˆ†ææµ‹è¯•...', 'info', 'integrationOutput');
                runAIAnalysisTests();
            }, 2500);
            
            setTimeout(() => {
                log('4/4 è¿è¡Œè°ƒè¯•æ£€æŸ¥...', 'info', 'integrationOutput');
                checkGameState();
                checkVueComponents();
                log('ğŸš€ å®Œæ•´é›†æˆæµ‹è¯•å®Œæˆ!', 'pass', 'integrationOutput');
            }, 3500);
        }
        
        // é¡µé¢åŠ è½½å®Œæˆåçš„åˆå§‹åŒ–
        window.addEventListener('load', function() {
            log('ğŸ® å¾·å·æ‰‘å…‹æ¸¸æˆç»Ÿä¸€æµ‹è¯•å¹³å°å·²åŠ è½½', 'pass');
            log('è¯·é€‰æ‹©ç›¸åº”çš„æµ‹è¯•æ ‡ç­¾é¡µå¼€å§‹æµ‹è¯•', 'info');
        });
    </script>
</body>
</html>